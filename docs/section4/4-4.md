# ASHVAC – Rule 4-4

**Rule ID:** 4-4
 
**Rule Description:** Where no heating and/or cooling system is to be installed, and a heating or cooling system is being simulated only to meet the requirements described in Table G3.1, heating and/or cooling system fans shall simulated to be cycled ON and OFF to meet heating and cooling loads during all hours.  
**Rule Assertion:** P-RMR = expected value                                           
**Appendix G Section:** Section G3.1-4 Schedules exception #1 for the proposed building  
**Appendix G Section Reference:**  

**Applicability:** All required data elements exist for P_RMR  
**Applicability Checks:** 

1. P-RMR is modeled with air-side systems that are being simulated only to meet the requirements described in Table G3.1 #10 proposed c and d: `if len(applicable_hvac_systems_list_p) > 0`
2. P-RMR airside HVAC system are been modeled correctly per Table G3.1 #10 proposed c: `if rule 10-10 == "PASS"`
3. P-RMR airside HVAC system are been modeled correctly per Table G3.1 #10 proposed d: `if rule 10-11 == "PASS"`

**Manual Check:** None  
**Evaluation Context:** Evaluate each data element  
**Data Lookup:** None  
**Function Call:** 

1. match_data_element()

## Rule Logic:

- For each zone in U_RMR: `for zone_u in U_RMR...zones:`
    - Reset heating system exists boolean variable equal to false each time it loops to a different zone: `heating_system_exists_u = FALSE`
    - Reset cooling system exists boolean variable equal to false each time it loops to a different zone: `cooling_system_exists_u = FALSE`
    - Reset heating system exists boolean variable equal to false each time it loops to a different zone: `heating_system_exists_p = FALSE`
    - Reset cooling system exists boolean variable equal to false each time it loops to a different zone: `cooling_system_exists_p = FALSE`
    - Check if there are terminal units associated with the zone, if not skip to proposed: `if len(zone_u.terminals) != 0:`
        - For each terminal unit associated with each zone: `for terminal_u in zone_u:`
            - if reheat_source is not null then set heating exists boolean variable equal to true: `if terminal_u.reheat_source != "None":`
                - Set heating system exists boolean variable equal to true: `heating_system_exists_u = TRUE`
            - if heat_capacity is not zero then set heating exists boolean variable equal to true: `if terminal_u.heat_capacity != 0:`
                - Set heating system exists boolean variable equal to true: `heating_system_exists_u = TRUE`    
            - Get the served_by_heating_ventilation_air_conditioning_systems for each terminal: `heating_ventilation_air_conditioning_systems_u = terminal_u.served_by_heating_ventilation_air_conditioning_systems`
            - Add to list of heating_ventilation_air_conditioning_systems_list_u as the code loops through the terminal units: `heating_ventilation_air_conditioning_systems_list_u = heating_ventilation_air_conditioning_systems_list_u.append(heating_ventilation_air_conditioning_systems_u)`                    
        - Convert the list of heating_ventilation_air_conditioning_systems_list_u associated with the zone to a set and the back to a list to eliminate duplicates: `heating_ventilation_air_conditioning_systems_list_u = list(set(heating_ventilation_air_conditioning_systems_list_u))`
        - For each hvac_u in heating_ventilation_air_conditioning_systems_list_u: `for hvac_u in heating_ventilation_air_conditioning_systems_list_u:`
            - For each heating system in hvac_u: `for heating_system_u in hvac_u.heating_system:`
                - if heating_system_type is not "None": `if heating_system_u.heating_system_type != "None":`
                    - Set heating system exists boolean variable equal to true: `heating_system_exists_u = TRUE`
            - For each cooling system in hvac_u: `for cooling_system_u in hvac_u.cooling_system:`
                - if cooling_system_type is not "None": `if cooling_system_u.cooling_system_type != "None":`
                    - Set cooling system exists boolean variable equal to true: `cooling_system_exists_u = TRUE`
            - For each preheat system in hvac_u: `for preheat_system_u in hvac_u.preheat_system:`
                - if preheat_system_type is not "None": `if preheat_system_u.heating_system_type != "None":`
                    - Set heating system exists boolean variable equal to true: `heating_system_exists_u = TRUE`

    - Get the analogous Zone ID in the P_RMR: `zone_p = match_data_element(P_RMR,Zones,zone_u.id)`
        - Check if there are terminal units associated with the zone, if not skip to if statements based on if there are heating and cooling systems: `if len(zone_p.terminals) != 0:`
            - For each terminal unit associated with each zone: `for terminal_p in zone_p:`
                - if reheat_source is not null then set heating exists boolean variable equal to true: `if terminal_p.reheat_source != "None":`
                    - Set heating system exists boolean variable equal to true: `heating_system_exists_p = TRUE`
                - if heat_capacity is not zero then set heating exists boolean variable equal to true: `if terminal_p.heat_capacity != 0:`
                    - Set heating system exists boolean variable equal to true: `heating_system_exists_p = TRUE`    
                - Get the served_by_heating_ventilation_air_conditioning_systems for each terminal: `heating_ventilation_air_conditioning_systems_p = terminal_p.served_by_heating_ventilation_air_conditioning_systems`
                - Add to the list of heating_ventilation_air_conditioning_systems_p as the code loops through the terminal units: `heating_ventilation_air_conditioning_systems_list_p = heating_ventilation_air_conditioning_systems_list_p.append(heating_ventilation_air_conditioning_systems_p)`                    
            - Convert the list of heating_ventilation_air_conditioning_systems_list_p associated with the zone to a set and the back to a list to eliminate duplicates: `heating_ventilation_air_conditioning_systems_list_p = list(set(heating_ventilation_air_conditioning_systems_list_p))`
                - For each hvac_p in heating_ventilation_air_conditioning_systems_list_p: `for hvac_p in heating_ventilation_air_conditioning_systems_list_p:`
                    - For each heating system in hvac_p: `for heating_system_p in hvac_p.heating_system:`
                        - if heating_system_type is not "None": `if heating_system_p.heating_system_type != "None":`
                            - Set heating system exists boolean variable equal to true: `heating_system_exists_p = TRUE`
                    - For each cooling system in hvac_p: `for cooling_system_p in hvac_p.cooling_system:`
                        - if cooling_system_type is not "None": `if cooling_system_p.cooling_system_type != "None":`
                            - Set cooling system exists boolean variable equal to true: `cooling_system_exists_p = TRUE`
                    - For each preheat system in hvac_p: `for preheat_system_p in hvac_p.preheat_system:`
                        - if preheat_system_type is not "None": `if preheat_system_p.heating_system_type != "None":`
                            - Set heating system exists boolean variable equal to true: `heating_system_exists_p = TRUE`   

    - if zone has no heating and cooling in the U_RMR but has heating and cooling in the P_RMR: `if heating_system_exists_u == FALSE AND cooling_system_exists_u == FALSE AND heating_system_exists_p == TRUE AND cooling_system_exists_p == TRUE:`
        - Set applicability flag: `rule_applicability_check = TRUE`
        - Add to list of applicable zones: `applicable_zone_list_p = applicable_zone_list_p.append(zone_p)`
            - else if the zone has heating but no cooling in the U_RMR and has both heating and cooling in the P_RMR: `else if heating_system_exists_u == TRUE AND cooling_system_exists_u == FALSE AND heating_system_exists_p == TRUE AND cooling_system_exists_p == TRUE:`
                - Set applicability flag: `rule_applicability_check = TRUE`
                - Add to list of applicable zones: `applicable_zone_list_p = applicable_zone_list_p.append(zone_p)`
                    - else if the zone has no heating but has cooling in the U_RMR and has both heating and cooling in the P_RMR: `else if heating_system_exists_u == FALSE AND cooling_system_exists_u == TRUE AND heating_system_exists_p == TRUE AND cooling_system_exists_p == TRUE:`
                        - Set applicability flag: `rule_applicability_check = TRUE`   
                        - Add to list of applicable zones: `applicable_zone_list_p = applicable_zone_list_p.append(zone_p)`              
    - if rule_applicability_check = TRUE: `if rule_applicability_check == TRUE:`
        - For each hvac_u in heating_ventilation_air_conditioning_systems_list_u: `for hvac_u in heating_ventilation_air_conditioning_systems_list_u:`
            - Get the analogous HVAC ID in the P_RMR: `hvac_p = match_data_element(P_RMR,heating_ventilation_air_conditioning_systems,hvac_u.id)`
            - Add to list of HVAC system that are applicable to this check, keep adding as code loops through zones: `applicable_hvac_systems_list_p = applicable_hvac_systems_list_p.append(hvac_p)`
 - Convert the list of applicable_hvac_systems_list_p to a set and the back to a list to eliminate duplicates after looping through all zones: 
 `applicable_hvac_systems_list_p = list(set(applicable_hvac_systems_list_p))`
 - For each hvac_p in applicable_hvac_systems_list_p: `for each hvac_p in applicable_hvac_systems_list_p:`                                    
    - For each fan system in hvac_p: `fan_systems_p in hvac_p.fan_systems:`
        - Get operation during occupied periods: `operation_during_occupied_p = fans_systems_p.operation_during_occupied`

        **Rule Assertion - Component:**
        - Case 1: For each applicable fan system, if fan system operation during occupied periods is cycling with load in the P_RMR: `if operation_during_occupied_p == “CYCLING”: PASS`

        - Case 2: For each applicable fan system, save hvac id to output array for failed components, Else:`Else: FAIL and failed_component_array.append(hvac_p)`

**Rule Assertion - RMR:**

- Case 1: If all components pass in the P-RMR: `if ALL_COMPONENTS == PASS: PASS and raise_message ${applicable_hvac_systems_list_p}`

- Case 2 : Else if the applicability check equals FALSE: `else if len(applicable_hvac_systems_list_p) ==0: NOT APPLICABLE`

- Case 3: Else, list all failed components: `else: FAIL and raise_message ${failed_component_array} and raise_messsage ${applicable_hvac_systems_list_p}`

**Applicability Checks:** 

1. P-RMR is modeled with air-side systems that are being simulated only to meet the requirements described in Table G3.1 #10 proposed c and d: `if len(applicable_hvac_systems_list_p) > 0`
2. P-RMR airside HVAC system are been modeled correctly per Table G3.1 #10 proposed c: `if rule 10-10 == "PASS"`
3. P-RMR airside HVAC system are been modeled correctly per Table G3.1 #10 proposed d: `if rule 10-11 == "PASS"`